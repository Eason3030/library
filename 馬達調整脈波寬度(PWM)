// --- 引腳定義 ---
// D9 是我們連接到 XY-MOS 模組 TRIG/PWM 輸入的 PWM 輸出引腳
const int pwmControlPin = 9;

// A0 是我們連接電位器中間引腳的類比輸入引腳
const int speedPotPin = A0;

// --- 變數 ---
int motorSpeed = 0; // 用於儲存計算出的 PWM 速度值 (0-255)

void setup() {
  // 將 PWM 控制引腳設定為輸出模式
  pinMode(pwmControlPin, OUTPUT);

  // 啟用序列埠通訊，設置鮑率 (baud rate) 為 9600
  Serial.begin(9600); 
}

void loop() {
  // Step 1: 讀取電位器的類比訊號值 (0 到 1023)
  int potValue = analogRead(speedPotPin);

  // Step 2: 將讀取範圍轉換/映射到 PWM 輸出範圍 (0 到 255)
  motorSpeed = map(potValue, 0, 1023, 0, 128);

  // Step 3: 使用 analogWrite() 將 PWM 訊號發送到 XY-MOS 模組
  analogWrite(pwmControlPin, motorSpeed);

  // Step 4: 列印速度值以進行偵錯到序列埠監視器
  Serial.print("Potentiometer Value: ");
  Serial.print(potValue);
  Serial.print(" | PWM Speed (0-255): ");
  Serial.println(motorSpeed); // println 在列印完畢後換行

  // 稍作延遲，防止類比讀數過快填滿序列埠緩衝區
  delay(50); // 將延遲增加到 50ms，以使序列埠輸出更易於閱讀
}

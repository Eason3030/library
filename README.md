# è‡ªè¡Œè»Šè¼”åŠ©è¼ªæŽ§åˆ¶ç³»çµ±

## å°ˆæ¡ˆæ¦‚è¿°
æœ¬å°ˆæ¡ˆç‚ºä¸€å¥—è‡ªè¡Œè»Šè¼”åŠ©è¼ªæŽ§åˆ¶ç³»çµ±ï¼Œæ•´åˆç´…å¤–ç·šé™æŽ§ã€éœçˆ¾æ„Ÿæ¸¬å™¨ã€é€Ÿåº¦æ„Ÿæ¸¬èˆ‡ MPU6050 é™€èžºå„€ï¼Œä¸¦æ­é… OLED é¡¯ç¤ºã€RGB LED ç‹€æ…‹æç¤ºåŠéŸ³æ•ˆåé¥‹ï¼Œä»¥æå‡è‡ªè¡Œè»Šè¡Œé§›å®‰å…¨æ€§èˆ‡äº’å‹•é«”é©—ã€‚

---

## ç³»çµ±åŠŸèƒ½

### 1. è¼”åŠ©è¼ªæŽ§åˆ¶
- **æ‰‹å‹•æ¨¡å¼**
  - **ç´…å¤–ç·šé™æŽ§**ï¼šæŒ‰ä¸‹é™æŽ§å™¨åˆ‡æ› UP/DOWN ç‹€æ…‹ã€‚
  - **éœçˆ¾æ„Ÿæ¸¬å™¨**ï¼šæ„Ÿæ¸¬æŒ‰å£“è‡ªå‹•æŽ§åˆ¶è¼”åŠ©è¼ªã€‚
  - **RGB LED æŒ‡ç¤º**ï¼šDOWN é¡¯ç¤ºé»ƒè‰²ï¼ŒUP é¡¯ç¤ºç¶ è‰²ã€‚
  - **éŸ³æ•ˆæç¤º**ï¼šæ”¾ä¸‹æˆ–æ”¶èµ·è¼”åŠ©è¼ªæ™‚æ’­æ”¾ä¸åŒéŸ³éšŽã€‚
- **è‡ªå‹•æ¨¡å¼**
  - é€Ÿåº¦ä½Žæ–¼ 10 km/h æ™‚è‡ªå‹•æ”¾ä¸‹è¼”åŠ©è¼ªã€‚
  - é€Ÿåº¦é«˜æ–¼ 10 km/h æ™‚è‡ªå‹•æ”¶èµ·è¼”åŠ©è¼ªã€‚
  - å°æ‡‰ RGB LEDï¼šä½Žé€Ÿé»ƒè‰²ï¼Œé«˜é€Ÿç¶ è‰²ã€‚
- **å‚¾æ–œè­¦å‘Š**
  - ç•¶å‚¾æ–œè§’åº¦è¶…éŽ 20Â° ä¸”æŒçºŒ 0.5 ç§’ï¼Œè‡ªå‹•æ”¾ä¸‹è¼”åŠ©è¼ªï¼ŒRGB LED é¡¯ç¤ºè—è‰²ã€‚
  - ç•¶è§’åº¦ä½Žæ–¼ 12Â° ä¸¦æŒçºŒ 3 ç§’ï¼Œè‡ªå‹•æ”¶èµ·è¼”åŠ©è¼ªï¼ŒRGB LED è®Šå›žç¶ è‰²ã€‚
  - ç™¼å‡ºéŸ³æ•ˆæç¤ºã€‚
- **ç·Šæ€¥åœæ­¢**
  - ç•¶è§’åº¦è¶…éŽ 35Â°ï¼Œç«‹å³éŽ–å®šè¼”åŠ©è¼ª DOWNï¼ŒRGB LED é¡¯ç¤ºç´…è‰²ä¸¦æ’­æ”¾è­¦å‘ŠéŸ³ã€‚
  - ç•¶è§’åº¦ä½Žæ–¼ 12Â°ï¼Œè§£é™¤ç·Šæ€¥ç‹€æ…‹ã€‚

---

### 2. æ„Ÿæ¸¬èˆ‡æŽ§åˆ¶æ¨¡çµ„
- **MPU6050**ï¼šè®€å–åŠ é€Ÿåº¦èˆ‡é™€èžºå„€æ•¸æ“šï¼Œè¨ˆç®—å‚¾æ–œè§’åº¦ã€‚
- **éœçˆ¾æ„Ÿæ¸¬å™¨**ï¼šæª¢æ¸¬æ‰‹å‹•æ“ä½œã€‚
- **é€Ÿåº¦æ„Ÿæ¸¬**ï¼šé€éŽéœçˆ¾è¼ªé€Ÿè¨ˆç®—å³æ™‚é€Ÿåº¦ã€‚
- **ç´…å¤–ç·šæŽ¥æ”¶å™¨**ï¼šæŽ¥æ”¶é™æŽ§æŒ‡ä»¤åˆ‡æ›è¼”åŠ©è¼ªç‹€æ…‹ã€‚

---

### 3. é¡¯ç¤ºèˆ‡äº’å‹•
- **OLED é¡¯ç¤ºå™¨**ï¼š
  - é¡¯ç¤ºç³»çµ±ç‹€æ…‹ã€è¼”åŠ©è¼ª UP/DOWNã€å³æ™‚é€Ÿåº¦åŠå‚¾æ–œè§’åº¦ã€‚
  - æä¾›å•Ÿå‹•ç•«é¢èˆ‡æ¸¬è©¦å‹•ç•«ã€‚
- **RGB LED**ï¼š
  - é€éŽä¸åŒé¡è‰²é¡¯ç¤ºç³»çµ±ç‹€æ…‹ï¼ˆç´…ã€è—ã€é»ƒã€ç¶ ã€ç´«ã€é—œé–‰ï¼‰ã€‚
- **éŸ³æ•ˆæç¤º**ï¼š
  - ç³»çµ±å•Ÿå‹•ã€è¼”åŠ©è¼ªåˆ‡æ›ã€ç·Šæ€¥è­¦å‘ŠåŠå®Œæˆæ“ä½œçš†æœ‰éŸ³æ•ˆåé¥‹ã€‚

---

### 4. æ¸¬è©¦åŠŸèƒ½
- OLED é¡¯ç¤ºã€ç´…å¤–ç·šã€MPU6050ã€éœçˆ¾æ„Ÿæ¸¬å™¨ã€é€Ÿåº¦æ„Ÿæ¸¬å™¨æ¨¡çµ„æ¸¬è©¦ã€‚
- RGB LED èˆ‡éŸ³æ•ˆç¢ºèªã€‚
- æ¯å€‹æ¨¡çµ„æ¸¬è©¦çµæžœæœƒåœ¨ OLED é¡¯ç¤ºåŠéŸ³æ•ˆåé¥‹ä¸­å‘ˆç¾ã€‚

---

### 5. é–‹ç™¼é€²åº¦
- ç³»çµ±æ•´åˆï¼šç´…å¤–ç·šã€éœçˆ¾ã€é€Ÿåº¦ã€MPU6050
- OLED é¡¯ç¤ºèˆ‡å‹•ç•«å®Œæˆ
- RGB LED é¡è‰²å°æ‡‰é‚è¼¯å®Œæˆ
- éŸ³æ•ˆåŠŸèƒ½å®Œæˆ
- æ¨¡çµ„æ¸¬è©¦åŠŸèƒ½å®Œæˆ
- éžé˜»å¡žå„ªåŒ–ï¼ˆå»¶é²æ›¿æ›ï¼Œæå‡åæ‡‰é€Ÿåº¦ï¼‰

---

### 6. æœªä¾†å„ªåŒ–æ–¹å‘
- å°‡ `beep()` å’Œå‹•ç•«å»¶é²æ”¹ç‚ºéžé˜»å¡žæ–¹å¼ï¼Œæé«˜ç·Šæ€¥ç‹€æ…‹èˆ‡å‚¾æ–œåæ‡‰å³æ™‚æ€§ã€‚
- åŠ å…¥æ•¸æ“šç´€éŒ„åŠŸèƒ½ï¼Œå¯å°‡é€Ÿåº¦èˆ‡å‚¾æ–œè§’åº¦å­˜æª”ã€‚
- å„ªåŒ– OLED é¡¯ç¤ºç•Œé¢ï¼Œä½¿å‹•ç•«èˆ‡è³‡è¨Šæ›´æµæš¢ã€‚
```mermaid
graph TD
    A[ç³»çµ±å•Ÿå‹•] --> B[ç¡¬é«”åˆå§‹åŒ–]
    B --> B1[OLED é¡¯ç¤ºå™¨]
    B --> B2[MPU6050 é™€èžºå„€]
    B --> B3[INA226 é›»æµç›£æ¸¬]
    B --> B4[éœçˆ¾æ„Ÿæ¸¬å™¨ x3]
    B --> B5[IR ç´…å¤–ç·šæŽ¥æ”¶å™¨]
    B1 & B2 & B3 & B4 & B5 --> C[RGB æ¸¬è©¦èˆ‡å•Ÿå‹•å‹•ç•«]
    C --> D[é€²å…¥ä¸»è¿´åœˆ Loop]
    
    D --> E[è®€å–æ‰€æœ‰æ„Ÿæ¸¬å™¨]
    E --> E1[MPU6050 å‚¾æ–œè§’åº¦]
    E --> E2[INA226 é›»æµå€¼]
    E --> E3[é€Ÿåº¦éœçˆ¾è„ˆè¡]
    E --> E4[ç«¯é»žéœçˆ¾ç‹€æ…‹]
    E --> E5[ç·Šæ€¥æŒ‰éˆ•ç‹€æ…‹]
    E --> E6[IR é™æŽ§è¨Šè™Ÿ]
    
    E1 & E2 & E3 & E4 & E5 & E6 --> F[ä¸‰å±¤æ±ºç­–é‚è¼¯]
    
    F --> G1[ðŸ”´ ç¬¬ä¸€å±¤ï¼šå®‰å…¨å±¤]
    G1 --> G1A{éŽè¼‰ æˆ– ç·Šæ€¥æŒ‰éˆ•?}
    G1A -->|æ˜¯| G1B[HALTED - è¼”åŠ©è¼ªå¼·åˆ¶ä¸‹é™]
    G1B --> G1C[ç­‰å¾… 5 ç§’å†·å»]
    G1C --> G1D[è¿”å›ž RUNNING]
    G1A -->|å¦| G2
    
    G2[ðŸ”´ ç·Šæ€¥å‚¾æ–œå±¤] --> G2A{è§’åº¦ > 35Â°?}
    G2A -->|æ˜¯| G2B[ç·Šæ€¥ä¸‹é™è¼”åŠ©è¼ª]
    G2B --> G2C[RGB ç´…è‰²é–ƒçˆ + è­¦å ±è²]
    G2A -->|å¦| G3
    
    G3[ðŸ”µ å‚¾æ–œè­¦å‘Šå±¤] --> G3A{è§’åº¦ > 20Â° æŒçºŒ 0.5s?}
    G3A -->|æ˜¯| G3B[è¼”åŠ©è¼ªä¸‹é™]
    G3B --> G3C[RGB è—è‰² + è­¦å‘ŠéŸ³]
    G3C --> G3D{è§’åº¦ < 12Â° æŒçºŒ 3s?}
    G3D -->|æ˜¯| G3E[è‡ªå‹•æ”¶èµ·è¼”åŠ©è¼ª]
    G3D -->|å¦| G3C
    G3A -->|å¦| G4
    
    G4[ðŸŸ¢ æ“ä½œå±¤] --> G4A{éœçˆ¾ç«¯é»žéŽ–å®š?}
    G4A -->|æ˜¯| G4B[ä¿æŒéŽ–å®šä½ç½®]
    G4B --> G4C[RGB é»ƒè‰²/ç¶ è‰²]
    G4A -->|å¦| G4D{æ‰‹å‹•æ¨¡å¼ IR?}
    G4D -->|æ˜¯| G4E[æ‰‹å‹•æŽ§åˆ¶ UP/DOWN]
    G4E --> G4F[RGB é»ƒè‰²/ç¶ è‰²]
    G4D -->|å¦| G4G[â­ è‡ªå‹•é€Ÿåº¦æŽ§åˆ¶]
    
    G4G --> G4H{é€Ÿåº¦ < 10 km/h?}
    G4H -->|æ˜¯| G4I[è¼”åŠ©è¼ª DOWN]
    G4I --> G4J[ç¹¼é›»å™¨ ON + RGB é»ƒè‰²]
    G4H -->|å¦| G4K[è¼”åŠ©è¼ª UP]
    G4K --> G4L[ç¹¼é›»å™¨ OFF + RGB ç¶ è‰²]
    
    G1D & G2C & G3E & G4C & G4F & G4J & G4L --> H[è¼¸å‡ºæŽ§åˆ¶è¨Šè™Ÿ]
    H --> H1[ç¹¼é›»å™¨æŽ§åˆ¶]
    H --> H2[PWM é€±æœŸæŽ§åˆ¶]
    H --> H3[RGB LED é¡¯ç¤º]
    H --> H4[OLED ç•«é¢æ›´æ–°]
    H --> H5[åºåˆ—åŸ é™¤éŒ¯è¼¸å‡º]
    
    H1 & H2 & H3 & H4 & H5 --> D

# 自行車輔助輪控制系統

## 專案概述
本專案為一套自行車輔助輪控制系統，整合紅外線遙控、霍爾感測器、速度感測與 MPU6050 陀螺儀，並搭配 OLED 顯示、RGB LED 狀態提示及音效反饋，以提升自行車行駛安全性與互動體驗。

---

## 系統功能

### 1. 輔助輪控制
- **手動模式**
  - **紅外線遙控**：按下遙控器切換 UP/DOWN 狀態。
  - **霍爾感測器**：感測按壓自動控制輔助輪。
  - **RGB LED 指示**：DOWN 顯示黃色，UP 顯示綠色。
  - **音效提示**：放下或收起輔助輪時播放不同音階。
- **自動模式**
  - 速度低於 10 km/h 時自動放下輔助輪。
  - 速度高於 10 km/h 時自動收起輔助輪。
  - 對應 RGB LED：低速黃色，高速綠色。
- **傾斜警告**
  - 當傾斜角度超過 20° 且持續 0.5 秒，自動放下輔助輪，RGB LED 顯示藍色。
  - 當角度低於 12° 並持續 3 秒，自動收起輔助輪，RGB LED 變回綠色。
  - 發出音效提示。
- **緊急停止**
  - 當角度超過 35°，立即鎖定輔助輪 DOWN，RGB LED 顯示紅色並播放警告音。
  - 當角度低於 12°，解除緊急狀態。

---

### 2. 感測與控制模組
- **MPU6050**：讀取加速度與陀螺儀數據，計算傾斜角度。
- **霍爾感測器**：檢測手動操作。
- **速度感測**：透過霍爾輪速計算即時速度。
- **紅外線接收器**：接收遙控指令切換輔助輪狀態。

---

### 3. 顯示與互動
- **OLED 顯示器**：
  - 顯示系統狀態、輔助輪 UP/DOWN、即時速度及傾斜角度。
  - 提供啟動畫面與測試動畫。
- **RGB LED**：
  - 透過不同顏色顯示系統狀態（紅、藍、黃、綠、紫、關閉）。
- **音效提示**：
  - 系統啟動、輔助輪切換、緊急警告及完成操作皆有音效反饋。

---

### 4. 測試功能
- OLED 顯示、紅外線、MPU6050、霍爾感測器、速度感測器模組測試。
- RGB LED 與音效確認。
- 每個模組測試結果會在 OLED 顯示及音效反饋中呈現。

---

### 5. 開發進度
- 系統整合：紅外線、霍爾、速度、MPU6050
- OLED 顯示與動畫完成
- RGB LED 顏色對應邏輯完成
- 音效功能完成
- 模組測試功能完成
- 非阻塞優化（延遲替換，提升反應速度）

---

### 6. 未來優化方向
- 將 `beep()` 和動畫延遲改為非阻塞方式，提高緊急狀態與傾斜反應即時性。
- 加入數據紀錄功能，可將速度與傾斜角度存檔。
- 優化 OLED 顯示界面，使動畫與資訊更流暢。
```mermaid
graph TD
    A[系統啟動] --> B[OLED 啟動畫面與自我檢測]
    B --> C[進入主迴圈]
    C --> D[讀取 MPU6050 傾斜角度]
    C --> E[讀取霍爾速度]
    C --> F[讀取 IR 遙控]
    C --> G[顯示 OLED 狀態]
    C --> H[RGB LED 狀態提示]
    D -->|角度過大| I[輔助輪自動下降/警告]
    E -->|速度低於門檻| J[輔助輪自動下降]
    F -->|手動切換| K[輔助輪 UP/DOWN]
    I --> G
    J --> G
    K --> G
